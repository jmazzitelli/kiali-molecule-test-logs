/bin/bash: line 1: go: command not found
Pulling down latest helm-charts from remote repo to here: /tmp/KIALI-GIT/helm-charts
Git repo for the helm charts is found here: /tmp/KIALI-GIT/helm-charts
make[1]: Entering directory '/tmp/KIALI-GIT/helm-charts'
Will use this helm executable: /tmp/KIALI-GIT/helm-charts/_output/helm-install/helm
Building Helm Chart for Kiali operator
==> Linting /tmp/KIALI-GIT/helm-charts/_output/charts/kiali-operator

1 chart(s) linted, 0 chart(s) failed
Successfully packaged chart and saved it to: /tmp/KIALI-GIT/helm-charts/_output/charts/kiali-operator-1.82.0-SNAPSHOT.tgz
make[1]: Leaving directory '/tmp/KIALI-GIT/helm-charts'
OCP repos: external=[default-route-openshift-image-registry.apps.ocp4.local] internal=[image-registry.openshift-image-registry.svc:5000]

Will auto-detect hosts to add based on the CLUSTER_REPO: default-route-openshift-image-registry.apps.ocp4.local
Auto-detected add host args: --add-host=kiali-istio-system.apps.ocp4.local:192.168.122.2 --add-host=prometheus-istio-system.apps.ocp4.local:192.168.122.2 --add-host=api.ocp4.local:192.168.122.2 --add-host=oauth-openshift.apps.ocp4.local:192.168.122.2
Will not rebuild kiali-molecule image.
podman volume exists molecule-tests-volume && echo "Podman volume already exists; deleting it" && podman volume rm molecule-tests-volume || true
podman volume create molecule-tests-volume
molecule-tests-volume
podman create -v molecule-tests-volume:/data --name molecule-volume-helper docker.io/busybox true
c91375116da4ace10b0ad8e89e7377ddbb2809629499acfe02b30294ab96e2c2
podman cp "/tmp/KIALI-GIT/helm-charts" molecule-volume-helper:/data/helm-charts-repo
podman cp "/tmp/KIALI-GIT/kiali/operator/" molecule-volume-helper:/data/operator
podman cp "/home/jmazzite/.kube/config" molecule-volume-helper:/data/kubeconfig
podman rm molecule-volume-helper
molecule-volume-helper
namespace/kiali-operator created
secret/kiali-operator-pull-secret created
secret/kiali-operator-pull-secret labeled
for msn in affinity-tolerations-resources-test; do podman run --rm  --env KUBECONFIG="/tmp/molecule/kubeconfig" --env K8S_AUTH_KUBECONFIG="/tmp/molecule/kubeconfig" --env MOLECULE_CLUSTER_TYPE="openshift" --env MOLECULE_HELM_CHARTS_REPO=/tmp/molecule/helm-charts-repo -v molecule-tests-volume:/tmp/molecule    -w /tmp/molecule/operator --network="host" --add-host=kiali-istio-system.apps.ocp4.local:192.168.122.2 --add-host=prometheus-istio-system.apps.ocp4.local:192.168.122.2 --add-host=api.ocp4.local:192.168.122.2 --add-host=oauth-openshift.apps.ocp4.local:192.168.122.2 --add-host="api.crc.testing:192.168.130.11" --add-host="kiali-istio-system.apps-crc.testing:192.168.130.11" --add-host="prometheus-istio-system.apps-crc.testing:192.168.130.11" --env DORP=podman --env OPERATOR_IMAGE_PULL_SECRET_NAME=kiali-operator-pull-secret --env MOLECULE_KIALI_CR_SPEC_VERSION=default --env PLUGIN_IMAGE_PULL_SECRET_JSON="" --env MOLECULE_OSSMCONSOLE_CR_SPEC_VERSION="default"  --env MOLECULE_OPERATOR_PROFILER_ENABLED=true --env MOLECULE_OPERATOR_INSTALLER=helm --env MOLECULE_DUMP_LOGS_ON_ERROR=true  --env MOLECULE_WAIT_RETRIES=360 localhost/kiali-molecule:latest molecule --debug test  --scenario-name ${msn}; if [ "$?" != "0" ]; then echo "Molecule test failed: ${msn}"; podman volume rm molecule-tests-volume; exit 1; fi; done
DEBUG    Validating schema /tmp/molecule/operator/molecule/affinity-tolerations-resources-test/molecule.yml.
WARNING  Driver podman does not provide a schema.
INFO     affinity-tolerations-resources-test scenario test matrix: prepare, converge, destroy
INFO     Performing prerun with role_name_check=0...
INFO     Running ansible-galaxy collection install -v -r requirements.yml
INFO     Set ANSIBLE_ROLES_PATH=roles:/home/runner/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles
INFO     Running affinity-tolerations-resources-test > prepare
INFO     Sanity checks: 'podman'
DEBUG: ANSIBLE ENVIRONMENT:
ANSIBLE_COLLECTIONS_PATH: /home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/collections:/home/runner/.ansible/collections:/usr/share/ansible/collections:/etc/ansible/collections
ANSIBLE_CONFIG: /home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/ansible.cfg
ANSIBLE_FILTER_PLUGINS: /usr/local/lib/python3.11/site-packages/molecule/provisioner/ansible/plugins/filter:/home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/plugins/filter:/tmp/molecule/operator/plugins/filter:/home/runner/.ansible/plugins/filter:/usr/share/ansible/plugins/filter
ANSIBLE_LIBRARY: /usr/local/lib/python3.11/site-packages/molecule/provisioner/ansible/plugins/modules:/usr/local/lib/python3.11/site-packages/molecule_plugins/vagrant/modules:/home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/library:/tmp/molecule/operator/library:/home/runner/.ansible/plugins/modules:/usr/share/ansible/plugins/modules
ANSIBLE_ROLES_PATH: /home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/roles:/tmp/molecule:/home/runner/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles

DEBUG: MOLECULE ENVIRONMENT:
MOLECULE_CLUSTER_TYPE: openshift
MOLECULE_DEBUG: 'True'
MOLECULE_DEPENDENCY_NAME: galaxy
MOLECULE_DRIVER_NAME: podman
MOLECULE_DUMP_LOGS_ON_ERROR: 'true'
MOLECULE_ENV_FILE: /tmp/molecule/operator/.env.yml
MOLECULE_EPHEMERAL_DIRECTORY: /home/runner/.cache/molecule/operator/affinity-tolerations-resources-test
MOLECULE_FILE: /home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/molecule.yml
MOLECULE_HELM_CHARTS_REPO: /tmp/molecule/helm-charts-repo
MOLECULE_INSTANCE_CONFIG: /home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/instance_config.yml
MOLECULE_INVENTORY_FILE: /home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/inventory/ansible_inventory.yml
MOLECULE_KIALI_CR_SPEC_VERSION: default
MOLECULE_OPERATOR_INSTALLER: helm
MOLECULE_OPERATOR_PROFILER_ENABLED: 'true'
MOLECULE_OSSMCONSOLE_CR_SPEC_VERSION: default
MOLECULE_PROJECT_DIRECTORY: /tmp/molecule/operator
MOLECULE_PROVISIONER_NAME: ansible
MOLECULE_SCENARIO_DIRECTORY: /tmp/molecule/operator/molecule/affinity-tolerations-resources-test
MOLECULE_SCENARIO_NAME: affinity-tolerations-resources-test
MOLECULE_STATE_FILE: /home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/state.yml
MOLECULE_VERIFIER_NAME: ansible
MOLECULE_VERIFIER_TEST_DIRECTORY: /tmp/molecule/operator/molecule/affinity-tolerations-resources-test/tests
MOLECULE_WAIT_RETRIES: '360'

DEBUG: SHELL REPLAY:
ANSIBLE_COLLECTIONS_PATH=/home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/collections:/home/runner/.ansible/collections:/usr/share/ansible/collections:/etc/ansible/collections ANSIBLE_CONFIG=/home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/ansible.cfg ANSIBLE_FILTER_PLUGINS=/usr/local/lib/python3.11/site-packages/molecule/provisioner/ansible/plugins/filter:/home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/plugins/filter:/tmp/molecule/operator/plugins/filter:/home/runner/.ansible/plugins/filter:/usr/share/ansible/plugins/filter ANSIBLE_LIBRARY=/usr/local/lib/python3.11/site-packages/molecule/provisioner/ansible/plugins/modules:/usr/local/lib/python3.11/site-packages/molecule_plugins/vagrant/modules:/home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/library:/tmp/molecule/operator/library:/home/runner/.ansible/plugins/modules:/usr/share/ansible/plugins/modules ANSIBLE_ROLES_PATH=/home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/roles:/tmp/molecule:/home/runner/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles MOLECULE_CLUSTER_TYPE=openshift MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=podman MOLECULE_DUMP_LOGS_ON_ERROR=true MOLECULE_ENV_FILE=/tmp/molecule/operator/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/home/runner/.cache/molecule/operator/affinity-tolerations-resources-test MOLECULE_FILE=/home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/molecule.yml MOLECULE_HELM_CHARTS_REPO=/tmp/molecule/helm-charts-repo MOLECULE_INSTANCE_CONFIG=/home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/instance_config.yml MOLECULE_INVENTORY_FILE=/home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/inventory/ansible_inventory.yml MOLECULE_KIALI_CR_SPEC_VERSION=default MOLECULE_OPERATOR_INSTALLER=helm MOLECULE_OPERATOR_PROFILER_ENABLED=true MOLECULE_OSSMCONSOLE_CR_SPEC_VERSION=default MOLECULE_PROJECT_DIRECTORY=/tmp/molecule/operator MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/tmp/molecule/operator/molecule/affinity-tolerations-resources-test MOLECULE_SCENARIO_NAME=affinity-tolerations-resources-test MOLECULE_STATE_FILE=/home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/state.yml MOLECULE_VERIFIER_NAME=ansible MOLECULE_VERIFIER_TEST_DIRECTORY=/tmp/molecule/operator/molecule/affinity-tolerations-resources-test/tests MOLECULE_WAIT_RETRIES=360


PLAY [Prepare] *****************************************************************

TASK [Gathering Facts] *********************************************************
ok: [localhost]

TASK [Get information about the cluster] ***************************************
/usr/local/lib/python3.11/site-packages/urllib3/connectionpool.py:1095: InsecureRequestWarning: Unverified HTTPS request is being made to host 'api.ocp4.local'. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.io/en/latest/advanced-usage.html#tls-warnings
  warnings.warn(
ok: [localhost]

TASK [Determine the cluster type] **********************************************
ok: [localhost]

TASK [Determine if the operator installation is managed externally or not] *****
ok: [localhost]

TASK [Make sure the operator namespace exists] *********************************
ok: [localhost]

TASK [Find the latest Operator Helm Chart] *************************************
changed: [localhost]

TASK [set_fact] ****************************************************************
ok: [localhost]

TASK [fail] ********************************************************************
skipping: [localhost]

TASK [Install Operator via Helm] ***********************************************
changed: [localhost]

TASK [Make sure the CR namespace exists] ***************************************
ok: [localhost]

TASK [Wait for the CRD to be established] **************************************
ok: [localhost]

TASK [Prepare initial Kiali CR definition based solely on the template] ********
ok: [localhost]

TASK [Create Kiali CR] *********************************************************
changed: [localhost]

TASK [Asserting that Kiali is Deployed] ****************************************
FAILED - RETRYING: [localhost]: Asserting that Kiali is Deployed (360 retries left).
FAILED - RETRYING: [localhost]: Asserting that Kiali is Deployed (359 retries left).
FAILED - RETRYING: [localhost]: Asserting that Kiali is Deployed (358 retries left).
FAILED - RETRYING: [localhost]: Asserting that Kiali is Deployed (357 retries left).
FAILED - RETRYING: [localhost]: Asserting that Kiali is Deployed (356 retries left).
FAILED - RETRYING: [localhost]: Asserting that Kiali is Deployed (355 retries left).
FAILED - RETRYING: [localhost]: Asserting that Kiali is Deployed (354 retries left).
FAILED - RETRYING: [localhost]: Asserting that Kiali is Deployed (353 retries left).
FAILED - RETRYING: [localhost]: Asserting that Kiali is Deployed (352 retries left).
FAILED - RETRYING: [localhost]: Asserting that Kiali is Deployed (351 retries left).
FAILED - RETRYING: [localhost]: Asserting that Kiali is Deployed (350 retries left).
FAILED - RETRYING: [localhost]: Asserting that Kiali is Deployed (349 retries left).
FAILED - RETRYING: [localhost]: Asserting that Kiali is Deployed (348 retries left).
FAILED - RETRYING: [localhost]: Asserting that Kiali is Deployed (347 retries left).
FAILED - RETRYING: [localhost]: Asserting that Kiali is Deployed (346 retries left).
FAILED - RETRYING: [localhost]: Asserting that Kiali is Deployed (345 retries left).
FAILED - RETRYING: [localhost]: Asserting that Kiali is Deployed (344 retries left).
FAILED - RETRYING: [localhost]: Asserting that Kiali is Deployed (343 retries left).
ok: [localhost]

PLAY RECAP *********************************************************************
localhost                  : ok=13   changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0

INFO     Running affinity-tolerations-resources-test > converge
DEBUG: ANSIBLE ENVIRONMENT:
ANSIBLE_COLLECTIONS_PATH: /home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/collections:/home/runner/.ansible/collections:/usr/share/ansible/collections:/etc/ansible/collections
ANSIBLE_CONFIG: /home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/ansible.cfg
ANSIBLE_FILTER_PLUGINS: /usr/local/lib/python3.11/site-packages/molecule/provisioner/ansible/plugins/filter:/home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/plugins/filter:/tmp/molecule/operator/plugins/filter:/home/runner/.ansible/plugins/filter:/usr/share/ansible/plugins/filter
ANSIBLE_LIBRARY: /usr/local/lib/python3.11/site-packages/molecule/provisioner/ansible/plugins/modules:/usr/local/lib/python3.11/site-packages/molecule_plugins/vagrant/modules:/home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/library:/tmp/molecule/operator/library:/home/runner/.ansible/plugins/modules:/usr/share/ansible/plugins/modules
ANSIBLE_ROLES_PATH: /home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/roles:/tmp/molecule:/home/runner/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles

DEBUG: MOLECULE ENVIRONMENT:
MOLECULE_CLUSTER_TYPE: openshift
MOLECULE_DEBUG: 'True'
MOLECULE_DEPENDENCY_NAME: galaxy
MOLECULE_DRIVER_NAME: podman
MOLECULE_DUMP_LOGS_ON_ERROR: 'true'
MOLECULE_ENV_FILE: /tmp/molecule/operator/.env.yml
MOLECULE_EPHEMERAL_DIRECTORY: /home/runner/.cache/molecule/operator/affinity-tolerations-resources-test
MOLECULE_FILE: /home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/molecule.yml
MOLECULE_HELM_CHARTS_REPO: /tmp/molecule/helm-charts-repo
MOLECULE_INSTANCE_CONFIG: /home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/instance_config.yml
MOLECULE_INVENTORY_FILE: /home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/inventory/ansible_inventory.yml
MOLECULE_KIALI_CR_SPEC_VERSION: default
MOLECULE_OPERATOR_INSTALLER: helm
MOLECULE_OPERATOR_PROFILER_ENABLED: 'true'
MOLECULE_OSSMCONSOLE_CR_SPEC_VERSION: default
MOLECULE_PROJECT_DIRECTORY: /tmp/molecule/operator
MOLECULE_PROVISIONER_NAME: ansible
MOLECULE_SCENARIO_DIRECTORY: /tmp/molecule/operator/molecule/affinity-tolerations-resources-test
MOLECULE_SCENARIO_NAME: affinity-tolerations-resources-test
MOLECULE_STATE_FILE: /home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/state.yml
MOLECULE_VERIFIER_NAME: ansible
MOLECULE_VERIFIER_TEST_DIRECTORY: /tmp/molecule/operator/molecule/affinity-tolerations-resources-test/tests
MOLECULE_WAIT_RETRIES: '360'

DEBUG: SHELL REPLAY:
ANSIBLE_COLLECTIONS_PATH=/home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/collections:/home/runner/.ansible/collections:/usr/share/ansible/collections:/etc/ansible/collections ANSIBLE_CONFIG=/home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/ansible.cfg ANSIBLE_FILTER_PLUGINS=/usr/local/lib/python3.11/site-packages/molecule/provisioner/ansible/plugins/filter:/home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/plugins/filter:/tmp/molecule/operator/plugins/filter:/home/runner/.ansible/plugins/filter:/usr/share/ansible/plugins/filter ANSIBLE_LIBRARY=/usr/local/lib/python3.11/site-packages/molecule/provisioner/ansible/plugins/modules:/usr/local/lib/python3.11/site-packages/molecule_plugins/vagrant/modules:/home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/library:/tmp/molecule/operator/library:/home/runner/.ansible/plugins/modules:/usr/share/ansible/plugins/modules ANSIBLE_ROLES_PATH=/home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/roles:/tmp/molecule:/home/runner/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles MOLECULE_CLUSTER_TYPE=openshift MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=podman MOLECULE_DUMP_LOGS_ON_ERROR=true MOLECULE_ENV_FILE=/tmp/molecule/operator/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/home/runner/.cache/molecule/operator/affinity-tolerations-resources-test MOLECULE_FILE=/home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/molecule.yml MOLECULE_HELM_CHARTS_REPO=/tmp/molecule/helm-charts-repo MOLECULE_INSTANCE_CONFIG=/home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/instance_config.yml MOLECULE_INVENTORY_FILE=/home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/inventory/ansible_inventory.yml MOLECULE_KIALI_CR_SPEC_VERSION=default MOLECULE_OPERATOR_INSTALLER=helm MOLECULE_OPERATOR_PROFILER_ENABLED=true MOLECULE_OSSMCONSOLE_CR_SPEC_VERSION=default MOLECULE_PROJECT_DIRECTORY=/tmp/molecule/operator MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/tmp/molecule/operator/molecule/affinity-tolerations-resources-test MOLECULE_SCENARIO_NAME=affinity-tolerations-resources-test MOLECULE_STATE_FILE=/home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/state.yml MOLECULE_VERIFIER_NAME=ansible MOLECULE_VERIFIER_TEST_DIRECTORY=/tmp/molecule/operator/molecule/affinity-tolerations-resources-test/tests MOLECULE_WAIT_RETRIES=360


PLAY [Tests] *******************************************************************

TASK [Gathering Facts] *********************************************************
ok: [localhost]

TASK [Get information about the cluster] ***************************************
/usr/local/lib/python3.11/site-packages/urllib3/connectionpool.py:1095: InsecureRequestWarning: Unverified HTTPS request is being made to host 'api.ocp4.local'. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.io/en/latest/advanced-usage.html#tls-warnings
  warnings.warn(
ok: [localhost]

TASK [Determine the cluster type] **********************************************
ok: [localhost]

TASK [Get Kiali CR if present] *************************************************
/usr/local/lib/python3.11/site-packages/urllib3/connectionpool.py:1095: InsecureRequestWarning: Unverified HTTPS request is being made to host 'api.ocp4.local'. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.io/en/latest/advanced-usage.html#tls-warnings
  warnings.warn(
ok: [localhost]

TASK [Get Kiali Operator Pod] **************************************************
ok: [localhost]

TASK [Get Kiali Pod] ***********************************************************
ok: [localhost]

TASK [Get Kiali Configmap] *****************************************************
/usr/local/lib/python3.11/site-packages/urllib3/connectionpool.py:1095: InsecureRequestWarning: Unverified HTTPS request is being made to host 'api.ocp4.local'. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.io/en/latest/advanced-usage.html#tls-warnings
  warnings.warn(
ok: [localhost]

TASK [Format Configmap] ********************************************************
ok: [localhost]

TASK [Get Kiali Deployment] ****************************************************
ok: [localhost]

TASK [Get Kiali Service] *******************************************************
ok: [localhost]

TASK [Get Kiali Route] *********************************************************
ok: [localhost]

TASK [Get Kiali Ingress] *******************************************************
skipping: [localhost]

TASK [Determine the Kiali Route URL on OpenShift] ******************************
ok: [localhost]

TASK [Determine the Kiali Ingress URL on minikube] *****************************
skipping: [localhost]

TASK [Determine the Kiali Ingress URL on kind] *********************************
skipping: [localhost]

TASK [Assert Kiali Pod is Running and there is only one] ***********************
ok: [localhost] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Assert Kiali Pod is Running on the correct Namespace] ********************
ok: [localhost] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Wait for Kiali CR changes to take effect] ********************************
ok: [localhost]

TASK [Set affinity and tolerations and resources and pod_annotations and service_annotations and pod_labels in current Kiali CR] ***
ok: [localhost]

TASK [Change Kiali CR with new Kiali CR] ***************************************
--- before
+++ after
@@ -1,7 +1,67 @@
 {
     "metadata": {
-        "generation": 1,
+        "generation": 2,
         "managedFields": [
+            {
+                "apiVersion": "kiali.io/v1alpha1",
+                "fieldsType": "FieldsV1",
+                "fieldsV1": {
+                    "f:metadata": {
+                        "f:finalizers": {
+                            ".": {},
+                            "v:\"kiali.io/finalizer\"": {}
+                        }
+                    }
+                },
+                "manager": "ansible-operator",
+                "operation": "Update",
+                "time": "2024-03-23T06:27:11Z"
+            },
+            {
+                "apiVersion": "kiali.io/v1alpha1",
+                "fieldsType": "FieldsV1",
+                "fieldsV1": {
+                    "f:status": {
+                        "f:deployment": {
+                            ".": {},
+                            "f:accessibleNamespaces": {},
+                            "f:instanceName": {},
+                            "f:namespace": {}
+                        },
+                        "f:environment": {
+                            ".": {},
+                            "f:isOpenshift": {},
+                            "f:kubernetesVersion": {},
+                            "f:openshiftVersion": {},
+                            "f:operatorVersion": {}
+                        },
+                        "f:progress": {
+                            ".": {},
+                            "f:duration": {},
+                            "f:message": {}
+                        },
+                        "f:specVersion": {}
+                    }
+                },
+                "manager": "OpenAPI-Generator",
+                "operation": "Update",
+                "subresource": "status",
+                "time": "2024-03-23T06:29:14Z"
+            },
+            {
+                "apiVersion": "kiali.io/v1alpha1",
+                "fieldsType": "FieldsV1",
+                "fieldsV1": {
+                    "f:status": {
+                        ".": {},
+                        "f:conditions": {}
+                    }
+                },
+                "manager": "ansible-operator",
+                "operation": "Update",
+                "subresource": "status",
+                "time": "2024-03-23T06:29:16Z"
+            },
             {
                 "apiVersion": "kiali.io/v1alpha1",
                 "fieldsType": "FieldsV1",
@@ -18,12 +78,40 @@
                             "f:additional_service_yaml": {
                                 ".": {},
                                 "f:externalName": {}
+                            },
+                            "f:affinity": {
+                                ".": {},
+                                "f:node": {
+                                    ".": {},
+                                    "f:preferredDuringSchedulingIgnoredDuringExecution": {}
+                                },
+                                "f:pod": {
+                                    ".": {},
+                                    "f:preferredDuringSchedulingIgnoredDuringExecution": {}
+                                },
+                                "f:pod_anti": {
+                                    ".": {},
+                                    "f:preferredDuringSchedulingIgnoredDuringExecution": {}
+                                }
+                            },
+                            "f:hpa": {
+                                ".": {},
+                                "f:spec": {
+                                    ".": {},
+                                    "f:maxReplicas": {},
+                                    "f:minReplicas": {}
+                                }
                             },
                             "f:image_name": {},
                             "f:image_pull_policy": {},
                             "f:image_version": {},
                             "f:ingress": {
                                 ".": {},
+                                "f:additional_labels": {
+                                    ".": {},
+                                    "f:aaa": {},
+                                    "f:camelCaseName": {}
+                                },
                                 "f:enabled": {}
                             },
                             "f:logger": {
@@ -31,7 +119,31 @@
                                 "f:log_level": {}
                             },
                             "f:namespace": {},
-                            "f:service_type": {}
+                            "f:pod_annotations": {
+                                ".": {},
+                                "f:some.test.io/keepCamelCaseFOO": {}
+                            },
+                            "f:pod_labels": {
+                                ".": {},
+                                "f:some.test.label/labelKeepCamelCaseFOO": {}
+                            },
+                            "f:resources": {
+                                ".": {},
+                                "f:limits": {
+                                    ".": {},
+                                    "f:memory": {}
+                                },
+                                "f:requests": {
+                                    ".": {},
+                                    "f:memory": {}
+                                }
+                            },
+                            "f:service_annotations": {
+                                ".": {},
+                                "f:another.test.io/keepCamelCaseBAR": {}
+                            },
+                            "f:service_type": {},
+                            "f:tolerations": {}
                         },
                         "f:istio_namespace": {},
                         "f:version": {}
@@ -39,74 +151,118 @@
                 },
                 "manager": "OpenAPI-Generator",
                 "operation": "Update",
-                "time": "2024-03-23T06:27:11Z"
-            },
-            {
-                "apiVersion": "kiali.io/v1alpha1",
-                "fieldsType": "FieldsV1",
-                "fieldsV1": {
-                    "f:metadata": {
-                        "f:finalizers": {
-                            ".": {},
-                            "v:\"kiali.io/finalizer\"": {}
-                        }
-                    }
-                },
-                "manager": "ansible-operator",
-                "operation": "Update",
-                "time": "2024-03-23T06:27:11Z"
-            },
-            {
-                "apiVersion": "kiali.io/v1alpha1",
-                "fieldsType": "FieldsV1",
-                "fieldsV1": {
-                    "f:status": {
-                        "f:deployment": {
-                            ".": {},
-                            "f:accessibleNamespaces": {},
-                            "f:instanceName": {},
-                            "f:namespace": {}
-                        },
-                        "f:environment": {
-                            ".": {},
-                            "f:isOpenshift": {},
-                            "f:kubernetesVersion": {},
-                            "f:openshiftVersion": {},
-                            "f:operatorVersion": {}
-                        },
-                        "f:progress": {
-                            ".": {},
-                            "f:duration": {},
-                            "f:message": {}
-                        },
-                        "f:specVersion": {}
-                    }
-                },
-                "manager": "OpenAPI-Generator",
-                "operation": "Update",
-                "subresource": "status",
-                "time": "2024-03-23T06:29:14Z"
-            },
-            {
-                "apiVersion": "kiali.io/v1alpha1",
-                "fieldsType": "FieldsV1",
-                "fieldsV1": {
-                    "f:status": {
-                        ".": {},
-                        "f:conditions": {}
-                    }
-                },
-                "manager": "ansible-operator",
-                "operation": "Update",
-                "subresource": "status",
-                "time": "2024-03-23T06:29:16Z"
+                "time": "2024-03-23T06:29:52Z"
             }
         ],
-        "resourceVersion": "4141120"
+        "resourceVersion": "4141339"
     },
     "spec": {
         "deployment": {
-            "ingress": {}
+            "affinity": {
+                "node": {
+                    "preferredDuringSchedulingIgnoredDuringExecution": [
+                        {
+                            "preference": {
+                                "matchExpressions": [
+                                    {
+                                        "key": "affinity-kiali-test",
+                                        "operator": "In",
+                                        "values": [
+                                            "affinity-kiali-test"
+                                        ]
+                                    }
+                                ]
+                            },
+                            "weight": 71
+                        }
+                    ]
+                },
+                "pod": {
+                    "preferredDuringSchedulingIgnoredDuringExecution": [
+                        {
+                            "podAffinityTerm": {
+                                "labelSelector": {
+                                    "matchExpressions": [
+                                        {
+                                            "key": "affinity-kiali-test",
+                                            "operator": "In",
+                                            "values": [
+                                                "affinity-kiali-test1"
+                                            ]
+                                        }
+                                    ]
+                                },
+                                "topologyKey": "failure-domain.beta.kubernetes.io/zone"
+                            },
+                            "weight": 72
+                        }
+                    ]
+                },
+                "pod_anti": {
+                    "preferredDuringSchedulingIgnoredDuringExecution": [
+                        {
+                            "podAffinityTerm": {
+                                "labelSelector": {
+                                    "matchExpressions": [
+                                        {
+                                            "key": "affinity-kiali-test",
+                                            "operator": "In",
+                                            "values": [
+                                                "affinity-kiali-test2"
+                                            ]
+                                        }
+                                    ]
+                                },
+                                "topologyKey": "failure-domain.beta.kubernetes.io/zone"
+                            },
+                            "weight": 73
+                        }
+                    ]
+                }
+            },
+            "hpa": {
+                "spec": {
+                    "maxReplicas": 1,
+                    "minReplicas": 1
+                }
+            },
+            "ingress": {
+                "additional_labels": {
+                    "aaa": "bbb",
+                    "camelCaseName": "camelCaseValue"
+                }
+            },
+            "pod_annotations": {
+                "some.test.io/keepCamelCaseFOO": "camelCaseValueFOO"
+            },
+            "pod_labels": {
+                "some.test.label/labelKeepCamelCaseFOO": "labelCamelCaseValueFOO"
+            },
+            "resources": {
+                "limits": {
+                    "memory": "32Gi"
+                },
+                "requests": {
+                    "memory": "320Mi"
+                }
+            },
+            "service_annotations": {
+                "another.test.io/keepCamelCaseBAR": "camelCaseValueBAR"
+            },
+            "tolerations": [
+                {
+                    "effect": "NoExecute",
+                    "key": "node.kubernetes.io/not-ready",
+                    "operator": "Exists",
+                    "tolerationSeconds": 777
+                },
+                {
+                    "effect": "NoExecute",
+                    "key": "node.kubernetes.io/unreachable",
+                    "operator": "Exists",
+                    "tolerationSeconds": 777
+                }
+            ]
         }
     }
 }

changed: [localhost]

TASK [Wait for Kiali CR changes to take effect] ********************************
FAILED - RETRYING: [localhost]: Wait for Kiali CR changes to take effect (360 retries left).
FAILED - RETRYING: [localhost]: Wait for Kiali CR changes to take effect (359 retries left).
FAILED - RETRYING: [localhost]: Wait for Kiali CR changes to take effect (358 retries left).
FAILED - RETRYING: [localhost]: Wait for Kiali CR changes to take effect (357 retries left).
FAILED - RETRYING: [localhost]: Wait for Kiali CR changes to take effect (356 retries left).
FAILED - RETRYING: [localhost]: Wait for Kiali CR changes to take effect (355 retries left).
FAILED - RETRYING: [localhost]: Wait for Kiali CR changes to take effect (354 retries left).
FAILED - RETRYING: [localhost]: Wait for Kiali CR changes to take effect (353 retries left).
FAILED - RETRYING: [localhost]: Wait for Kiali CR changes to take effect (352 retries left).
FAILED - RETRYING: [localhost]: Wait for Kiali CR changes to take effect (351 retries left).
FAILED - RETRYING: [localhost]: Wait for Kiali CR changes to take effect (350 retries left).
FAILED - RETRYING: [localhost]: Wait for Kiali CR changes to take effect (349 retries left).
ok: [localhost]

TASK [Asserting that Kiali Pod exists and there is only one] *******************
FAILED - RETRYING: [localhost]: Asserting that Kiali Pod exists and there is only one (360 retries left).
FAILED - RETRYING: [localhost]: Asserting that Kiali Pod exists and there is only one (359 retries left).
FAILED - RETRYING: [localhost]: Asserting that Kiali Pod exists and there is only one (358 retries left).
FAILED - RETRYING: [localhost]: Asserting that Kiali Pod exists and there is only one (357 retries left).
ok: [localhost]

TASK [Wait for Kiali to be running and accepting requests] *********************
ok: [localhost]

TASK [Get information about the cluster] ***************************************
/usr/local/lib/python3.11/site-packages/urllib3/connectionpool.py:1095: InsecureRequestWarning: Unverified HTTPS request is being made to host 'api.ocp4.local'. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.io/en/latest/advanced-usage.html#tls-warnings
  warnings.warn(
ok: [localhost]

TASK [Determine the cluster type] **********************************************
ok: [localhost]

TASK [Get Kiali CR if present] *************************************************
/usr/local/lib/python3.11/site-packages/urllib3/connectionpool.py:1095: InsecureRequestWarning: Unverified HTTPS request is being made to host 'api.ocp4.local'. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.io/en/latest/advanced-usage.html#tls-warnings
  warnings.warn(
ok: [localhost]

TASK [Get Kiali Operator Pod] **************************************************
ok: [localhost]

TASK [Get Kiali Pod] ***********************************************************
ok: [localhost]

TASK [Get Kiali Configmap] *****************************************************
/usr/local/lib/python3.11/site-packages/urllib3/connectionpool.py:1095: InsecureRequestWarning: Unverified HTTPS request is being made to host 'api.ocp4.local'. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.io/en/latest/advanced-usage.html#tls-warnings
  warnings.warn(
ok: [localhost]

TASK [Format Configmap] ********************************************************
ok: [localhost]

TASK [Get Kiali Deployment] ****************************************************
ok: [localhost]

TASK [Get Kiali Service] *******************************************************
ok: [localhost]

TASK [Get Kiali Route] *********************************************************
ok: [localhost]

TASK [Get Kiali Ingress] *******************************************************
skipping: [localhost]

TASK [Determine the Kiali Route URL on OpenShift] ******************************
ok: [localhost]

TASK [Determine the Kiali Ingress URL on minikube] *****************************
skipping: [localhost]

TASK [Determine the Kiali Ingress URL on kind] *********************************
skipping: [localhost]

TASK [Assert Kiali Pod is Running and there is only one] ***********************
ok: [localhost] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Assert Kiali Pod is Running on the correct Namespace] ********************
ok: [localhost] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Assert that tolerations were applied to the deployment] ******************
ok: [localhost] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Assert that affinity was applied] ****************************************
ok: [localhost] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Assert that resources was applied] ***************************************
ok: [localhost] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Assert that pod_annotations was applied] *********************************
ok: [localhost] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Assert that service_annotations was applied] *****************************
ok: [localhost] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Assert that pod_labels was applied] **************************************
ok: [localhost] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Assert that camelCase is retained in additional service yaml] ************
ok: [localhost] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Make sure the additional ingress labels made it to the Route on OpenShift or Ingress on non-OpenShift] ***
ok: [localhost] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Get the HPA resource that should now exist] ******************************
ok: [localhost]

TASK [Assert the HPA resource has been created] ********************************
ok: [localhost] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Wait for Kiali CR changes to take effect] ********************************
ok: [localhost]

TASK [Set affinity and tolerations and resources and pod_annotations and service_annotations and pod_labels in current Kiali CR] ***
ok: [localhost]

TASK [Change Kiali CR with new Kiali CR] ***************************************
--- before
+++ after
@@ -1,6 +1,6 @@
 {
     "metadata": {
-        "generation": 2,
+        "generation": 3,
         "managedFields": [
             {
                 "apiVersion": "kiali.io/v1alpha1",
@@ -34,39 +34,12 @@
                                 ".": {},
                                 "f:externalName": {}
                             },
-                            "f:affinity": {
-                                ".": {},
-                                "f:node": {
-                                    ".": {},
-                                    "f:preferredDuringSchedulingIgnoredDuringExecution": {}
-                                },
-                                "f:pod": {
-                                    ".": {},
-                                    "f:preferredDuringSchedulingIgnoredDuringExecution": {}
-                                },
-                                "f:pod_anti": {
-                                    ".": {},
-                                    "f:preferredDuringSchedulingIgnoredDuringExecution": {}
-                                }
-                            },
-                            "f:hpa": {
-                                ".": {},
-                                "f:spec": {
-                                    ".": {},
-                                    "f:maxReplicas": {},
-                                    "f:minReplicas": {}
-                                }
-                            },
+                            "f:affinity": {},
                             "f:image_name": {},
                             "f:image_pull_policy": {},
                             "f:image_version": {},
                             "f:ingress": {
                                 ".": {},
-                                "f:additional_labels": {
-                                    ".": {},
-                                    "f:aaa": {},
-                                    "f:camelCaseName": {}
-                                },
                                 "f:enabled": {}
                             },
                             "f:logger": {
@@ -74,31 +47,7 @@
                                 "f:log_level": {}
                             },
                             "f:namespace": {},
-                            "f:pod_annotations": {
-                                ".": {},
-                                "f:some.test.io/keepCamelCaseFOO": {}
-                            },
-                            "f:pod_labels": {
-                                ".": {},
-                                "f:some.test.label/labelKeepCamelCaseFOO": {}
-                            },
-                            "f:resources": {
-                                ".": {},
-                                "f:limits": {
-                                    ".": {},
-                                    "f:memory": {}
-                                },
-                                "f:requests": {
-                                    ".": {},
-                                    "f:memory": {}
-                                }
-                            },
-                            "f:service_annotations": {
-                                ".": {},
-                                "f:another.test.io/keepCamelCaseBAR": {}
-                            },
-                            "f:service_type": {},
-                            "f:tolerations": {}
+                            "f:service_type": {}
                         },
                         "f:istio_namespace": {},
                         "f:version": {}
@@ -154,115 +103,12 @@
                 "time": "2024-03-23T06:31:20Z"
             }
         ],
-        "resourceVersion": "4141956"
+        "resourceVersion": "4142310"
     },
     "spec": {
         "deployment": {
-            "affinity": {
-                "node": {
-                    "preferredDuringSchedulingIgnoredDuringExecution": [
-                        {
-                            "preference": {
-                                "matchExpressions": [
-                                    {
-                                        "key": "affinity-kiali-test",
-                                        "operator": "In",
-                                        "values": [
-                                            "affinity-kiali-test"
-                                        ]
-                                    }
-                                ]
-                            },
-                            "weight": 71
-                        }
-                    ]
-                },
-                "pod": {
-                    "preferredDuringSchedulingIgnoredDuringExecution": [
-                        {
-                            "podAffinityTerm": {
-                                "labelSelector": {
-                                    "matchExpressions": [
-                                        {
-                                            "key": "affinity-kiali-test",
-                                            "operator": "In",
-                                            "values": [
-                                                "affinity-kiali-test1"
-                                            ]
-                                        }
-                                    ]
-                                },
-                                "topologyKey": "failure-domain.beta.kubernetes.io/zone"
-                            },
-                            "weight": 72
-                        }
-                    ]
-                },
-                "pod_anti": {
-                    "preferredDuringSchedulingIgnoredDuringExecution": [
-                        {
-                            "podAffinityTerm": {
-                                "labelSelector": {
-                                    "matchExpressions": [
-                                        {
-                                            "key": "affinity-kiali-test",
-                                            "operator": "In",
-                                            "values": [
-                                                "affinity-kiali-test2"
-                                            ]
-                                        }
-                                    ]
-                                },
-                                "topologyKey": "failure-domain.beta.kubernetes.io/zone"
-                            },
-                            "weight": 73
-                        }
-                    ]
-                }
-            },
-            "hpa": {
-                "spec": {
-                    "maxReplicas": 1,
-                    "minReplicas": 1
-                }
-            },
-            "ingress": {
-                "additional_labels": {
-                    "aaa": "bbb",
-                    "camelCaseName": "camelCaseValue"
-                }
-            },
-            "pod_annotations": {
-                "some.test.io/keepCamelCaseFOO": "camelCaseValueFOO"
-            },
-            "pod_labels": {
-                "some.test.label/labelKeepCamelCaseFOO": "labelCamelCaseValueFOO"
-            },
-            "resources": {
-                "limits": {
-                    "memory": "32Gi"
-                },
-                "requests": {
-                    "memory": "320Mi"
-                }
-            },
-            "service_annotations": {
-                "another.test.io/keepCamelCaseBAR": "camelCaseValueBAR"
-            },
-            "tolerations": [
-                {
-                    "effect": "NoExecute",
-                    "key": "node.kubernetes.io/not-ready",
-                    "operator": "Exists",
-                    "tolerationSeconds": 777
-                },
-                {
-                    "effect": "NoExecute",
-                    "key": "node.kubernetes.io/unreachable",
-                    "operator": "Exists",
-                    "tolerationSeconds": 777
-                }
-            ]
+            "affinity": {},
+            "ingress": {}
         }
     }
 }

changed: [localhost]

TASK [Wait for Kiali CR changes to take effect] ********************************
FAILED - RETRYING: [localhost]: Wait for Kiali CR changes to take effect (360 retries left).
FAILED - RETRYING: [localhost]: Wait for Kiali CR changes to take effect (359 retries left).
FAILED - RETRYING: [localhost]: Wait for Kiali CR changes to take effect (358 retries left).
FAILED - RETRYING: [localhost]: Wait for Kiali CR changes to take effect (357 retries left).
FAILED - RETRYING: [localhost]: Wait for Kiali CR changes to take effect (356 retries left).
FAILED - RETRYING: [localhost]: Wait for Kiali CR changes to take effect (355 retries left).
FAILED - RETRYING: [localhost]: Wait for Kiali CR changes to take effect (354 retries left).
FAILED - RETRYING: [localhost]: Wait for Kiali CR changes to take effect (353 retries left).
FAILED - RETRYING: [localhost]: Wait for Kiali CR changes to take effect (352 retries left).
FAILED - RETRYING: [localhost]: Wait for Kiali CR changes to take effect (351 retries left).
FAILED - RETRYING: [localhost]: Wait for Kiali CR changes to take effect (350 retries left).
FAILED - RETRYING: [localhost]: Wait for Kiali CR changes to take effect (349 retries left).
FAILED - RETRYING: [localhost]: Wait for Kiali CR changes to take effect (348 retries left).
ok: [localhost]

TASK [Asserting that Kiali Pod exists and there is only one] *******************
FAILED - RETRYING: [localhost]: Asserting that Kiali Pod exists and there is only one (360 retries left).
FAILED - RETRYING: [localhost]: Asserting that Kiali Pod exists and there is only one (359 retries left).
FAILED - RETRYING: [localhost]: Asserting that Kiali Pod exists and there is only one (358 retries left).
ok: [localhost]

TASK [Wait for Kiali to be running and accepting requests] *********************
ok: [localhost]

TASK [Get information about the cluster] ***************************************
/usr/local/lib/python3.11/site-packages/urllib3/connectionpool.py:1095: InsecureRequestWarning: Unverified HTTPS request is being made to host 'api.ocp4.local'. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.io/en/latest/advanced-usage.html#tls-warnings
  warnings.warn(
ok: [localhost]

TASK [Determine the cluster type] **********************************************
ok: [localhost]

TASK [Get Kiali CR if present] *************************************************
/usr/local/lib/python3.11/site-packages/urllib3/connectionpool.py:1095: InsecureRequestWarning: Unverified HTTPS request is being made to host 'api.ocp4.local'. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.io/en/latest/advanced-usage.html#tls-warnings
  warnings.warn(
ok: [localhost]

TASK [Get Kiali Operator Pod] **************************************************
ok: [localhost]

TASK [Get Kiali Pod] ***********************************************************
ok: [localhost]

TASK [Get Kiali Configmap] *****************************************************
/usr/local/lib/python3.11/site-packages/urllib3/connectionpool.py:1095: InsecureRequestWarning: Unverified HTTPS request is being made to host 'api.ocp4.local'. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.io/en/latest/advanced-usage.html#tls-warnings
  warnings.warn(
ok: [localhost]

TASK [Format Configmap] ********************************************************
ok: [localhost]

TASK [Get Kiali Deployment] ****************************************************
ok: [localhost]

TASK [Get Kiali Service] *******************************************************
ok: [localhost]

TASK [Get Kiali Route] *********************************************************
ok: [localhost]

TASK [Get Kiali Ingress] *******************************************************
skipping: [localhost]

TASK [Determine the Kiali Route URL on OpenShift] ******************************
ok: [localhost]

TASK [Determine the Kiali Ingress URL on minikube] *****************************
skipping: [localhost]

TASK [Determine the Kiali Ingress URL on kind] *********************************
skipping: [localhost]

TASK [Assert Kiali Pod is Running and there is only one] ***********************
ok: [localhost] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Assert Kiali Pod is Running on the correct Namespace] ********************
ok: [localhost] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Assert that empty tolerations were applied to the deployment] ************
ok: [localhost] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Assert that empty affinity was applied] **********************************
ok: [localhost] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Assert that empty resources was applied and we have the default resources set] ***
ok: [localhost] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Try to obtain the HPA which should have been removed] ********************
ok: [localhost]

TASK [Assert the HPA resource has been removed] ********************************
ok: [localhost] => {
    "changed": false,
    "msg": "All assertions passed"
}

PLAY RECAP *********************************************************************
localhost                  : ok=67   changed=2    unreachable=0    failed=0    skipped=9    rescued=0    ignored=0

INFO     Running affinity-tolerations-resources-test > destroy
DEBUG: ANSIBLE ENVIRONMENT:
ANSIBLE_COLLECTIONS_PATH: /home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/collections:/home/runner/.ansible/collections:/usr/share/ansible/collections:/etc/ansible/collections
ANSIBLE_CONFIG: /home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/ansible.cfg
ANSIBLE_FILTER_PLUGINS: /usr/local/lib/python3.11/site-packages/molecule/provisioner/ansible/plugins/filter:/home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/plugins/filter:/tmp/molecule/operator/plugins/filter:/home/runner/.ansible/plugins/filter:/usr/share/ansible/plugins/filter
ANSIBLE_LIBRARY: /usr/local/lib/python3.11/site-packages/molecule/provisioner/ansible/plugins/modules:/usr/local/lib/python3.11/site-packages/molecule_plugins/vagrant/modules:/home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/library:/tmp/molecule/operator/library:/home/runner/.ansible/plugins/modules:/usr/share/ansible/plugins/modules
ANSIBLE_ROLES_PATH: /home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/roles:/tmp/molecule:/home/runner/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles

DEBUG: MOLECULE ENVIRONMENT:
MOLECULE_CLUSTER_TYPE: openshift
MOLECULE_DEBUG: 'True'
MOLECULE_DEPENDENCY_NAME: galaxy
MOLECULE_DRIVER_NAME: podman
MOLECULE_DUMP_LOGS_ON_ERROR: 'true'
MOLECULE_ENV_FILE: /tmp/molecule/operator/.env.yml
MOLECULE_EPHEMERAL_DIRECTORY: /home/runner/.cache/molecule/operator/affinity-tolerations-resources-test
MOLECULE_FILE: /home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/molecule.yml
MOLECULE_HELM_CHARTS_REPO: /tmp/molecule/helm-charts-repo
MOLECULE_INSTANCE_CONFIG: /home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/instance_config.yml
MOLECULE_INVENTORY_FILE: /home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/inventory/ansible_inventory.yml
MOLECULE_KIALI_CR_SPEC_VERSION: default
MOLECULE_OPERATOR_INSTALLER: helm
MOLECULE_OPERATOR_PROFILER_ENABLED: 'true'
MOLECULE_OSSMCONSOLE_CR_SPEC_VERSION: default
MOLECULE_PROJECT_DIRECTORY: /tmp/molecule/operator
MOLECULE_PROVISIONER_NAME: ansible
MOLECULE_SCENARIO_DIRECTORY: /tmp/molecule/operator/molecule/affinity-tolerations-resources-test
MOLECULE_SCENARIO_NAME: affinity-tolerations-resources-test
MOLECULE_STATE_FILE: /home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/state.yml
MOLECULE_VERIFIER_NAME: ansible
MOLECULE_VERIFIER_TEST_DIRECTORY: /tmp/molecule/operator/molecule/affinity-tolerations-resources-test/tests
MOLECULE_WAIT_RETRIES: '360'

DEBUG: SHELL REPLAY:
ANSIBLE_COLLECTIONS_PATH=/home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/collections:/home/runner/.ansible/collections:/usr/share/ansible/collections:/etc/ansible/collections ANSIBLE_CONFIG=/home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/ansible.cfg ANSIBLE_FILTER_PLUGINS=/usr/local/lib/python3.11/site-packages/molecule/provisioner/ansible/plugins/filter:/home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/plugins/filter:/tmp/molecule/operator/plugins/filter:/home/runner/.ansible/plugins/filter:/usr/share/ansible/plugins/filter ANSIBLE_LIBRARY=/usr/local/lib/python3.11/site-packages/molecule/provisioner/ansible/plugins/modules:/usr/local/lib/python3.11/site-packages/molecule_plugins/vagrant/modules:/home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/library:/tmp/molecule/operator/library:/home/runner/.ansible/plugins/modules:/usr/share/ansible/plugins/modules ANSIBLE_ROLES_PATH=/home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/roles:/tmp/molecule:/home/runner/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles MOLECULE_CLUSTER_TYPE=openshift MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=podman MOLECULE_DUMP_LOGS_ON_ERROR=true MOLECULE_ENV_FILE=/tmp/molecule/operator/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/home/runner/.cache/molecule/operator/affinity-tolerations-resources-test MOLECULE_FILE=/home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/molecule.yml MOLECULE_HELM_CHARTS_REPO=/tmp/molecule/helm-charts-repo MOLECULE_INSTANCE_CONFIG=/home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/instance_config.yml MOLECULE_INVENTORY_FILE=/home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/inventory/ansible_inventory.yml MOLECULE_KIALI_CR_SPEC_VERSION=default MOLECULE_OPERATOR_INSTALLER=helm MOLECULE_OPERATOR_PROFILER_ENABLED=true MOLECULE_OSSMCONSOLE_CR_SPEC_VERSION=default MOLECULE_PROJECT_DIRECTORY=/tmp/molecule/operator MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/tmp/molecule/operator/molecule/affinity-tolerations-resources-test MOLECULE_SCENARIO_NAME=affinity-tolerations-resources-test MOLECULE_STATE_FILE=/home/runner/.cache/molecule/operator/affinity-tolerations-resources-test/state.yml MOLECULE_VERIFIER_NAME=ansible MOLECULE_VERIFIER_TEST_DIRECTORY=/tmp/molecule/operator/molecule/affinity-tolerations-resources-test/tests MOLECULE_WAIT_RETRIES=360


PLAY [Destroy] *****************************************************************

TASK [Gathering Facts] *********************************************************
ok: [localhost]

TASK [Get information about the cluster] ***************************************
/usr/local/lib/python3.11/site-packages/urllib3/connectionpool.py:1095: InsecureRequestWarning: Unverified HTTPS request is being made to host 'api.ocp4.local'. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.io/en/latest/advanced-usage.html#tls-warnings
  warnings.warn(
ok: [localhost]

TASK [Determine the cluster type] **********************************************
ok: [localhost]

TASK [Determine if the operator installation is managed externally or not] *****
ok: [localhost]

TASK [Remove Kiali CR] *********************************************************
changed: [localhost]

TASK [Wait for Kiali ConfigMap to be uninstalled] ******************************
ok: [localhost]

TASK [Uninstall Operator via Helm] *********************************************
changed: [localhost]

TASK [Remove CRDs] *************************************************************
changed: [localhost]

TASK [Removing Operator namespace] *********************************************
changed: [localhost]

TASK [Removing CR namespace if it is different than control plane and operator namespace] ***
skipping: [localhost]

PLAY RECAP *********************************************************************
localhost                  : ok=9    changed=4    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0

INFO     Pruning extra files from scenario ephemeral directory
podman volume rm molecule-tests-volume
molecule-tests-volume
